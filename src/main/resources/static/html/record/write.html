<!DOCTYPE html>
<html>
<head>
	<title>Rank Board Website</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	<link rel="shortcut icon" href="images/favicon.ico" />
	<link href='https://fonts.googleapis.com/css?family=Lato:400,300,700&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="css/animate.css" />
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="css/swiper.min.css" />
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	<script src="javascript/pace.min.js"></script>
	<script src="javascript/includeHTML.js"></script>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<!-- amchart 4 -->
	<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
	<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
	<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
	<script src="https://cdn.amcharts.com/lib/4/themes/kelly.js"></script>

	<!-- record data -->

	<style type="text/css">
		.playerInput {
			padding: 0;
		}
		.playerInput div {
			padding: 0; 
			margin-bottom: 15px;
		}
		
		.teamLabel {
			width: 100%;
		}
		.mapSelect {
			
		}
		
	</style>
</head>

<script>
	$(document).ready(function() {
		$("#headerDiv").load("html/include/header.html");
		$("#footerDiv").load("html/include/footer.html");
	});
</script>

<script type="text/javascript">

$(document).ready(function() {
	
	var section = document.querySelector('section');
	
})


//contextPath 구하기
function getContextPath() {
  //var hostIndex = location.href.indexOf( location.host ) + location.host.length;
  //return location.href.substring( hostIndex, location.href.indexOf('/', hostIndex + 1) );
	return window.location.pathname.substring(0, window.location.pathname.indexOf("/",2));
};




//게시판 만들기
function makeBoard(i, section, player, playerDiv, chartDiv) {
		
	//프로필 만들기
	drawProfile(i, player, playerDiv);
	
	//기본 정보 넣기
	drawInfo(player, playerDiv);
		
	//기록 넣기
	drawRecord(player, playerDiv);

	//섹션에 어펜드
	section.appendChild(playerDiv);
	
	//전체 영역div에 차트div 어펜드
	playerDiv.appendChild(chartDiv);
	
	//차트 계산
	//var chartValue = calcChart(player);
	
	//차트 그리기
	//drawChart(player, chartValue);
	drawChart(player, player["statistics"]);
}


function drawProfile(i, player, playerDiv) {
	var profileDiv = document.createElement('div');
	var img = document.createElement('img');
	var name = document.createElement('div');
	var nickname = document.createElement('div');
	
	profileDiv.setAttribute("class", "col-sm-2 col-md-2 text-center");
	profileDiv.setAttribute("style", "cursor:pointer;");
	profileDiv.setAttribute("onclick", "viewDetail("+player['seq']+");");
	name.setAttribute("class", "name");
	nickname.setAttribute("class", "nickname");
	
	img.setAttribute("src", "images/profile/"+player['photo']);
	img.setAttribute("alt", player['nickname']);
	img.setAttribute("class", "profileImg");
	name.textContent = player['name'];
	nickname.textContent = player['nickname'];
	
	profileDiv.appendChild(img);
	profileDiv.appendChild(name);
	profileDiv.appendChild(nickname);
	
	if(i < 3) {
		var medal = document.createElement('img');
		var laurelWreath = document.createElement('img');
		
		img.style.position = "relative";
		medal.setAttribute("class", "medalImg");
		laurelWreath.setAttribute("class", "laurelWreathImg");

		if(i == 0) {
			laurelWreath.setAttribute("src", "images/icons/laurel-wreath3.png");
			medal.setAttribute("src", "images/icons/augustus-gold-coin.jpg");
			medal.setAttribute("alt", "금메달");
			img.style.border = "5px solid #C99C3D";
			laurelWreath.style.width = "190px";
			laurelWreath.style.height = "175px";
		} else if(i == 1) {
			laurelWreath.setAttribute("src", "images/icons/laurel-wreath2.png");
			medal.setAttribute("src", "images/icons/augustus-silver-coin.jpg");
			medal.setAttribute("alt", "은메달");
			img.style.border = "5px solid #999999";
			laurelWreath.style.width = "150px";
			laurelWreath.style.height = "auto";
		} else if(i == 2) {
			laurelWreath.setAttribute("src", "images/icons/laurel-wreath.png");
			medal.setAttribute("src", "images/icons/augustus-bronze-coin.jpg");
			medal.setAttribute("alt", "동메달");
			img.style.border = "5px solid #A67051";
			laurelWreath.style.width = "150px";
			laurelWreath.style.height = "auto";
		}
		profileDiv.appendChild(medal);
		profileDiv.appendChild(laurelWreath);
		
	}
	playerDiv.appendChild(profileDiv);
}


function drawInfo(player, playerDiv) {
	var infoDiv = document.createElement('div');
	var ul = document.createElement('ul');
	infoDiv.setAttribute("class", "col-sm-2 col-md-2");
	var titleArr = ['소속팀', '주종족', '총 스코어'];
	
	for(var i=0; i<3; i++) {
		var li = document.createElement('li');
		var title = document.createElement('div');
		var item = document.createElement('div');
		
		title.setAttribute("class", "title");
		title.textContent = titleArr[i];
		
		item.setAttribute("class", "title");
		if(i == 0) item.textContent = player['team'];
		if(i == 1) item.textContent = player['tribe'];
		if(i == 2) item.textContent = '(개인) ' + player['win'] + '승 ' + player['lose'] + '패';
			
		li.appendChild(title);
		li.appendChild(item);
		ul.appendChild(li);
	}
	infoDiv.appendChild(ul);
	playerDiv.appendChild(infoDiv);
}


function drawRecord(player, playerDiv) {
	var recordDiv = document.createElement('div');
	var ul = document.createElement('ul');
	recordDiv.setAttribute("class", "col-sm-5 col-md-5");
	
	for(var i=0; i<2; i++) {
		var li = document.createElement('li');
		var title = document.createElement('div');
		var itemDiv = document.createElement('div');
		var ul_sub = document.createElement('ul');
		
		title.setAttribute("class", "title");
		itemDiv.setAttribute("class", "title");
		
		if(i == 0) {
			title.textContent = player['teamMatch_ko'];
			
			var teamMatch = player['teamMatch'];
			for(var j=0; j<teamMatch.length; j++) {
				var listItem = document.createElement('li');
		   		listItem.textContent = teamMatch[j].myTeam + '(me) VS. ' + teamMatch[j].opposeTeam + ' : ' + teamMatch[j].win + '승 ' + teamMatch[j].lose + '패';
		   		ul_sub.appendChild(listItem);
			}
			itemDiv.appendChild(ul_sub);
		}
		
		if(i == 1) {
			title.textContent = player['rivalry_ko'];
			
			var rivalry = player['rivalry'];
		    for(var j=0; j<rivalry.length; j++) {
		   		var listItem = document.createElement('li');
		   		listItem.textContent = 'VS. ' + rivalry[j].rival + ' : ' + rivalry[j].win + '승 ' + rivalry[j].lose + '패';
		   		ul_sub.appendChild(listItem);
		    }
		    itemDiv.appendChild(ul_sub);
		}
		li.appendChild(title);
		li.appendChild(itemDiv);
		ul.appendChild(li);
	}
	recordDiv.appendChild(ul);
	playerDiv.appendChild(recordDiv);
}


function calcChart(player) {
	var rivalry = player['rivalry'];
	var arr = new Array();
	var obj1 = new Object();
	var obj2 = new Object();
	var win = 0;
	var lose = 0;
	
	for(var i=0; i<rivalry.length; i++) {
		win = win + rivalry[i].win;
		lose = lose + rivalry[i].lose;
	}
	obj1.record = "win";
	obj1.value = win;
	obj2.record = "lose";
	obj2.value = lose;
	arr.push(obj1);
	arr.push(obj2);
	return arr;
}




//selectAll
function selectAll() {
	$.ajax({
        url:getContextPath() + '/selectAll',
        type:'post',
        success: function(data) {
        	
        	if(data == "S") {
				
        	}
        }
    });
}

//
function viewDetail(seq) {
	
	var obj = new Object;
	obj.seq = seq;
	
	var form = document.createElement("form");
	form.setAttribute("charset", "UTF-8");
    form.setAttribute("method", "get"); 
    form.setAttribute("action", getContextPath() + "/viewDetail");
	
    var field = document.createElement("input");
    field.setAttribute("type", "text");
    field.setAttribute("name", "seq");
    field.setAttribute("value", seq);
    form.appendChild(field);
    
    document.body.appendChild(form);
    form.submit();
}


</script>

<body>
	<header id="headerDiv" ></header>
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 col-md-12">
				<article class="content">
					<h1>Match Forms</h1>
					<section>
						<h2>매치 입력하기</h2>
						
						<form name="contact_form" id="contact_form" method="post" class="form-horizontal">
							<div class="form-group">
								<label class="col-sm-2 control-label">매치유형</label>
								<label class="col-sm-2 radio-inline">
									<input type="radio" name="inlineRadioOptions" id="type_rival" value="0"> 개인전
								</label>
								<label class="col-sm-2 radio-inline">
									<input type="radio" name="inlineRadioOptions" id="type_team" value="1"> 팀전
								</label>
								<!-- <div class="col-sm-6"></div> -->
							</div>
							
							<div class="form-group">	
								<div class="playerInput col-sm-6">
									<label class="teamLabel col-sm-12 control-label">홈팀</label>
									<label class="col-sm-4 control-label">플레이어 1</label>
									<div class="col-sm-8 animated-form-control">
										<input type="text" name="homePlayer" class="text form-control" id="Form_Form_name" required="required" aria-required="true" />
									</div>
									<label class="col-sm-4 control-label">플레이어 2</label>
									<div class="col-sm-8 animated-form-control">
										<input type="text" name="homePlayer" class="text form-control" id="Form_Form_name" />
									</div>
									<label class="col-sm-4 control-label">플레이어 3</label>
									<div class="col-sm-8 animated-form-control">
										<input type="text" name="homePlayer" class="text form-control" id="Form_Form_name" />
									</div>
									<label class="col-sm-4 control-label">플레이어 4</label>
									<div class="col-sm-8 animated-form-control">
										<input type="text" name="homePlayer" class="text form-control" id="Form_Form_name" />
									</div>
								</div>
								
								<div class="playerInput col-sm-6">
									<label class="teamLabel col-sm-12 control-label">어웨이팀</label>
									<label class="col-sm-4 control-label">플레이어 1</label>
									<div class="col-sm-8 animated-form-control">
										<input type="text" name="awayPlayer" class="text form-control" id="Form_Form_name" required="required" aria-required="true" />
									</div>
									<label class="col-sm-4 control-label">플레이어 2</label>
									<div class="col-sm-8 animated-form-control">
										<input type="text" name="awayPlayer" class="text form-control" id="Form_Form_name" />
									</div>
									<label class="col-sm-4 control-label">플레이어 3</label>
									<div class="col-sm-8 animated-form-control">
										<input type="text" name="awayPlayer" class="text form-control" id="Form_Form_name" />
									</div>
									<label class="col-sm-4 control-label">플레이어 4</label>
									<div class="col-sm-8 animated-form-control">
										<input type="text" name="awayPlayer" class="text form-control" id="Form_Form_name" />
									</div>
								</div>
							</div>
							
							<div class="form-group">
								<div class="playerInput">
									<label class="col-sm-2 control-label">맵</label>
									<div class="col-sm-4 animated-form-control">
										<select class="form-control">
											<option>Python 1.4</option>
											<option>The Hunters 1.3</option>
										</select>
									</div>
									<label class="col-sm-2 control-label">리플레이</label>
									<div class="col-sm-4 animated-form-control">
										<input type="file" name="replayFile" class="text form-control" id="replayFile" />
									</div>
									
									<label class="col-sm-2 control-label">매치 날짜</label>
									<div class="col-sm-4 animated-form-control">
										<input type="date" name="matchDate" class="text form-control" id="matchDate" />
									</div>
									
									<label class="col-sm-2 control-label">랩타임</label>
									<div class="col-sm-4 animated-form-control">
										<input type="time" name="lapTime" class="text form-control" id="lapTime" />
									</div>
									
									<label class="col-sm-2 control-label">승리팀</label>
									<label class="col-sm-2 radio-inline">
										<input type="radio" name="inlineRadioOptions" id="type_home" value="0"> 홈팀
									</label>
									<label class="col-sm-2 radio-inline">
										<input type="radio" name="inlineRadioOptions" id="type_away" value="1"> 어웨이팀
									</label>
								</div>
								<br/>
							</div>
							
							<div class="form-group">
								<div class="col-sm-12 col-md-12 ">
									<a id="submit_btn" class="btn btn-primary pull-right">저장</a>
								</div>
							</div>
						</form>
					</section>
				</article>
			</div>
		</div>
	</div>
    <footer id="footerDiv" class="page-footer" ></footer>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="bootstrap/js/bootstrap.min.js"></script>
	<script src="javascript/animate-on-scroll.js"></script>
	<script src="javascript/script.js"></script>
</body>

</html>